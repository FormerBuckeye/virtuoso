
TD=target-i386
 
TAINTDIR=$(HOME)/hg/taint
QEMUDIR=$(HOME)/hg/iferret-logging-new

INCDIRS = -I . -I $(TAINTDIR)/common -I $(QEMUDIR) -I $(QEMUDIR)/target-i386 
LIBDIRS = -L$(TAINTDIR)/qaint/lib
LIBS = -lqaint -lpthread -static
CFLAGS = -g -fno-inline -Dinline="" $(INCDIRS) $(LIBDIRS) -DIFERRET_BACKEND

OBJS = iferret.o iferret_info_flow.o iferret_open_fd.o iferret_log.o iferret_syscall_stack.o iferret_op_str.o int_set.o int_string_hashtable.o int_int_hashtable.o vslht.o
SRCS = $(OBJS,.o=.c) 

iferret: $(OBJS)
	g++ $(CFLAGS) -o iferret $(OBJS)  $(LIBS)


iferret.o: iferret.c
	$(CC) $(CFLAGS) -c iferret.c 

iferret_info_flow.o: iferret_info_flow.c
	$(CC) $(CFLAGS) -c iferret_info_flow.c

iferret_open_fd.o: iferret_open_fd.c
	$(CC) $(CFLAGS) -c iferret_open_fd.c 


iferret_log.o: iferret_log.c
	$(CC) $(CFLAGS) -c iferret_log.c 

iferret_op_str.o: $(TD)/iferret_op_str.c
	$(CC) $(CFLAGS) -c $(TD)/iferret_op_str.c 

iferret_syscall.o: $(TD)/iferret_syscall.c
	$(CC) $(CFLAGS) -c $(TD)/iferret_syscall.c 

iferret_syscall_stack.o: $(TD)/iferret_syscall_stack.c
	$(CC) $(CFLAGS) -c $(TD)/iferret_syscall_stack.c 

int_set.o: int_set.c
	$(CC) $(CFLAGS) -c int_set.c 

int_string_hashtable.o: int_string_hashtable.c
	$(CC) $(CFLAGS) -c int_string_hashtable.c 

int_int_hashtable.o: int_int_hashtable.c
	$(CC) $(CFLAGS) -c int_int_hashtable.c 

vslht.o: vslht.c
	$(CC) $(CFLAGS) -c vslht.c 


clean:
	rm -f $(OBJS)

